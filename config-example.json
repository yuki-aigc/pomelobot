{
    "llm": {
        "default_model": "default_model",
        "models": [
            {
                "alias": "default_model",
                "provider": "openai",
                "base_url": "https://api.openai.com/v1",
                "model": "gpt-4o",
                "api_key": "",
                "max_retries": 3
            },
            {
                "alias": "claude35",
                "provider": "anthropic",
                "base_url": "https://api.anthropic.com",
                "model": "claude-3-5-sonnet-latest",
                "api_key": "",
                "headers": {
                    "anthropic-version": "2023-06-01"
                },
                "max_retries": 3
            }
        ]
    },
    "agent": {
        "workspace": "./workspace",
        "skills_dir": "./workspace/skills",
        "recursion_limit": 50,
        "compaction": {
            "enabled": true,
            "auto_compact_threshold": 80000,
            "context_window": 128000,
            "reserve_tokens": 20000,
            "max_history_share": 0.5
        },
        "memory": {
            "backend": "pgsql",
            "pgsql": {
                "enabled": true,
                "connection_string": "",
                "host": "127.0.0.1",
                "port": 5432,
                "user": "pomelobot",
                "password": "Admin@123",
                "database": "pomelobot",
                "ssl": false,
                "schema": "pomelobot_memory"
            },
            "retrieval": {
                "mode": "hybrid",
                "max_results": 8,
                "min_score": 0.2,
                "sync_on_search": true,
                "sync_min_interval_ms": 20000,
                "hybrid_vector_weight": 0.6,
                "hybrid_fts_weight": 0.4,
                "hybrid_candidate_multiplier": 2,
                "include_session_events": true,
                "session_events_max_results": 6,
                "session_events_vector_async_enabled": true,
                "session_events_vector_async_interval_ms": 5000,
                "session_events_vector_async_batch_size": 16,
                "session_events_ttl_days": 90,
                "session_events_ttl_cleanup_interval_ms": 600000
            },
            "embedding": {
                "enabled": true,
                "cache_enabled": true,
                "providers": [
                    {
                        "provider": "openai",
                        "base_url": "https://api.openai.com/v1",
                        "model": "text-embedding-3-small",
                        "api_key": "",
                        "timeout_ms": 15000
                    }
                ]
            },
            "session_isolation": {
                "enabled": true,
                "direct_scope": "main",
                "group_scope_prefix": "group_"
            },
            "transcript": {
                "enabled": false,
                "max_chars_per_entry": 3000
            }
        }
    },
    "exec": {
        "enabled": true,
        "commandsFile": "./exec-commands.json",
        "defaultTimeoutMs": 30000,
        "maxOutputLength": 50000,
        "approvals": {
            "enabled": true
        }
    },
    "mcp": {
        "enabled": false,
        "throwOnLoadError": true,
        "prefixToolNameWithServerName": true,
        "additionalToolNamePrefix": "",
        "useStandardContentBlocks": false,
        "onConnectionError": "throw",
        "servers": {
            "filesystem": {
                "transport": "stdio",
                "command": "npx",
                "args": [
                    "-y",
                    "@modelcontextprotocol/server-filesystem",
                    "./workspace"
                ],
                "restart": {
                    "enabled": true,
                    "maxAttempts": 3,
                    "delayMs": 1000
                }
            },
            "weather": {
                "transport": "sse",
                "url": "https://example.com/mcp/sse",
                "headers": {
                    "Authorization": "Bearer YOUR_TOKEN"
                },
                "reconnect": {
                    "enabled": true,
                    "maxAttempts": 5,
                    "delayMs": 2000
                },
                "automaticSSEFallback": true
            }
        }
    },
    "cron": {
        "enabled": true,
        "store": "./workspace/cron/jobs.json",
        "timezone": "Asia/Shanghai",
        "runLog": "./workspace/cron/runs.jsonl"
    },
    "dingtalk": {
        "enabled": false,
        "clientId": "",
        "clientSecret": "",
        "robotCode": "",
        "corpId": "",
        "agentId": "",
        "messageType": "card",
        "cardTemplateId": "",
        "showThinking": true,
        "debug": false,
        "voice": {
            "enabled": true,
            "requireRecognition": true,
            "prependRecognitionHint": true
        },
        "cron": {
            "defaultTarget": "cidxxxxxxxxxxxx",
            "useMarkdown": true,
            "title": "SREBot 定时任务",
            "autoMemorySaveAt4": true
        },
        "execApprovals": {
            "enabled": false,
            "mode": "button",
            "templateId": "",
            "timeoutMs": 300000
        }
    }
}
